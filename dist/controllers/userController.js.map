{"version":3,"sources":["../../server/controllers/userController.js"],"names":["userController","getInfo","request","response","userid","params","query","values","db","queryResult","length","json","error","message","username","getViews"],"mappings":";;;;;AAAA,IAAMA,iBAAiB,EAAvB;;AAEAA,eAAeC,OAAf,GAAyB,UAACC,OAAD,EAAUC,QAAV,EAAuB;AAAA,KACvCC,MADuC,GAC5BF,QAAQG,MADoB,CACvCD,MADuC;;AAE/C,KAAME,QAAQ,gCAAd;AACA,KAAMC,SAAS,CAAC,UAAD,EAAa,OAAb,EAAsBH,MAAtB,CAAf;;AAEAF,SAAQM,EAAR,CAAWF,KAAX,CAAiBA,KAAjB,EAAwBC,MAAxB,EAAgC,UAACE,WAAD,EAAiB;AAChD,MAAIA,YAAYC,MAAZ,KAAuB,CAA3B,EAA8B;AAC7B,UAAOP,SAASQ,IAAT,CAAc;AACpBC,WAAO,IADa;AAEpBC,aAAS;AAFW,IAAd,CAAP;AAIA;AACDV,WAASQ,IAAT,CAAc;AACbG,aAAUL,YAAY,CAAZ,EAAeK;AADZ,GAAd;AAGA,EAVD;AAWA,CAhBD;;AAkBAd,eAAee,QAAf,GAA0B,UAACb,OAAD,EAAUC,QAAV,EAAuB;AAAA,KACxCC,MADwC,GAC7BF,QAAQG,MADqB,CACxCD,MADwC;;AAEhD,KAAME,QAAQ;;;;;;;;;;sDAAd;AAWA,KAAMC,SAAS,CAACH,MAAD,CAAf;;AAEAF,SAAQM,EAAR,CAAWF,KAAX,CAAiBA,KAAjB,EAAwBC,MAAxB,EAAgC,UAACE,WAAD,EAAiB;AAChDN,WAASQ,IAAT,CAAcF,WAAd;AACA,EAFD;AAGA,CAlBD;;kBAoBeT,c","file":"userController.js","sourcesContent":["const userController = {}\r\n\r\nuserController.getInfo = (request, response) => {\r\n\tconst { userid } = request.params\r\n\tconst query = 'SELECT ?? FROM ?? WHERE id = ?'\r\n\tconst values = ['username', 'users', userid]\r\n\r\n\trequest.db.query(query, values, (queryResult) => {\r\n\t\tif (queryResult.length === 0) {\r\n\t\t\treturn response.json({\r\n\t\t\t\terror: true,\r\n\t\t\t\tmessage: 'Invalid resource specified',\r\n\t\t\t})\r\n\t\t}\r\n\t\tresponse.json({\r\n\t\t\tusername: queryResult[0].username,\r\n\t\t})\r\n\t})\r\n}\r\n\r\nuserController.getViews = (request, response) => {\r\n\tconst { userid } = request.params\r\n\tconst query = '\\\r\n\tSELECT \\\r\n\t`user_records`.`timestamp` AS record_timestamp, \\\r\n    `videos`.`url` AS video_url, \\\r\n    `videos`.`name` AS video_name, \\\r\n    `videos`.`length` AS video_length, \\\r\n    `channels`.`name` AS channel_name, \\\r\n    `channels`.`url` AS channel_url \\\r\n\tFROM (SELECT * FROM `records` WHERE user_id = ?) AS user_records \\\r\n\tLEFT JOIN `videos` ON user_records.`video_id` = `videos`.`id` \\\r\n\tLEFT JOIN `channels` ON channel_id = `channels`.`id`'\r\n\tconst values = [userid]\r\n\r\n\trequest.db.query(query, values, (queryResult) => {\r\n\t\tresponse.json(queryResult)\r\n\t})\r\n}\r\n\r\nexport default userController\r\n"]}